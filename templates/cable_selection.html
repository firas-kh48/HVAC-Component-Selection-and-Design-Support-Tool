{% extends "base.html" %}
{% block content %}
<a href="/" class="btn-main" style="margin-bottom:18px;">Return to Main Screen</a>
<h1>Cable Selection Calculator</h1>
{% if selected_compressor %}
<div style="background:#e3f2fd; border-radius:8px; padding:16px; margin-bottom:18px;">
    <b>Selected Compressor:</b> {{ selected_compressor.name }}<br>
    <b>Load:</b> {{ selected_compressor.load }} A<br>
    <b>Ambient:</b> {{ selected_compressor.ambient }} °C<br>
</div>
{% endif %}

<h3>Recommended Cable</h3>
{% if mca != 'Invalid input.' %}
    <table border="1" width="100%" style="margin-bottom:18px;">
        <tr><th>Property</th><th>Value</th></tr>
        <tr><td>Minimum Cable Ampacity (MCA) needed</td><td><strong>{{ mca|round(2) }} A</strong></td></tr>
        {% if selected_cable %}
            <tr><td>Recommended Cable Size</td><td><strong>AWG {{ selected_cable.awg }}</strong> (Ampacity: {{ selected_cable.ampacity }} A)</td></tr>
        {% else %}
            <tr><td colspan="2"><strong>No standard cable size found for this ampacity.</strong></td></tr>
        {% endif %}
    </table>
{% else %}
    <div><em>Invalid input for cable calculation.</em></div>
{% endif %}
{% if load_current is not none and ambient_temp is not none %}
  <div style="margin-bottom:18px;">
    <strong>Current Input:</strong> {{ load_current }} A, {{ ambient_temp }} °C
  </div>
{% endif %}
{% if mca is not none %}
    <div class="result-box">
        <h2>Result</h2>
        <p><strong>Your Input:</strong><br>
        Load Current: {{ load_current }} A<br>
        Ambient Temperature: {{ ambient_temp }} °C</p>
        <p>Minimum Cable Ampacity (MCA) needed: <strong>{{ mca|round(2) }} A</strong></p>
        {% if selected_cable %}
            <p>Recommended Cable Size: <strong>AWG {{ selected_cable.awg }}</strong> (Ampacity: {{ selected_cable.ampacity }} A)</p>
        {% else %}
            <p><strong>No standard cable size found for this ampacity.</strong></p>
        {% endif %}
    </div>
{% endif %}

<h2>Cable Selections Table</h2>
<table>
    <tr>
        <th>Ampacity (A)</th>
        <th>AWG Size</th>
    </tr>
    {% for cable in cable_table %}
    <tr{% if selected_cable and cable.awg == selected_cable.awg %} style="background:#c3e6cb;font-weight:bold;"{% endif %}>
        <td>{{ cable.ampacity }}</td>
        <td>{{ cable.awg }}</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
