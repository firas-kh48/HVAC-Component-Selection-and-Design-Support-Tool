{% extends "base.html" %}
{% block content %}
<a href="/" class="btn-main" style="margin-bottom:18px;">Return to Main Screen</a>
<h1>Circuit Breaker Selection</h1>
{% if selected_compressor %}
  <div style="background:#e3f2fd; border-radius:8px; padding:16px; margin-bottom:18px;">
    <b>Selected Compressor:</b> {{ selected_compressor.name }}<br>
    <b>Load:</b> {{ selected_compressor.load }} A<br>
    <b>Ambient:</b> {{ selected_compressor.ambient }} Â°C<br>
  </div>
{% endif %}
{% if load_current is not none %}
  <div style="margin-bottom:18px;">
    <strong>Current Input:</strong> {{ load_current }} A
  </div>
{% endif %}
{% if min_cb_amp is not none and max_cb_amp is not none %}
    <div class="result-box">
        <h2>Result</h2>
        <p><strong>Your Input:</strong><br>
        Load Current: {{ load_current }} A</p>
        <p>Circuit Breaker Ampacity Range: <strong>{{ min_cb_amp|round(2) }} A &lt; CB &lt; {{ max_cb_amp|round(2) }} A</strong></p>
        {% if selected_cb and selected_cb|length > 0 %}
            <p>Recommended Circuit Breaker(s):
                <strong>
                {% for cb in selected_cb %}
                    {{ cb }} A{% if not loop.last %}, {% endif %}
                {% endfor %}
                </strong>
            </p>
        {% else %}
            <p><strong>No standard circuit breaker found in this range.</strong></p>
        {% endif %}
    </div>
{% endif %}
<h2>Circuit Breaker Selections Table</h2>
<table>
    <tr><th>MCB (A)</th><th>MCCB (A)</th></tr>
    {% for mcb, mccb in cb_table_zipped %}
    <tr>
        <td{% if selected_cb and mcb in selected_cb %} style="background:#c3e6cb;font-weight:bold;"{% endif %}>{{ mcb }}</td>
        <td{% if selected_cb and mccb in selected_cb %} style="background:#c3e6cb;font-weight:bold;"{% endif %}>{{ mccb }}</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
